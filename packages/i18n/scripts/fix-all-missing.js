#!/usr/bin/env node

import { readFileSync, writeFileSync, readdirSync } from 'fs';
import { join } from 'path';
import { missingTranslations } from './missing-translations.js';

// Add username fields to locales that need them
const usernameFields = {
  cs: {
    chooseUsername: 'Vyberte uživatelské jméno',
    usernamePlaceholder: 'vase-jmeno',
    usernameHint: 'Pouze písmena, čísla, pomlčky a podtržítka (2-24 znaků)',
  },
  da: {
    chooseUsername: 'Vælg et brugernavn',
    usernamePlaceholder: 'dit-brugernavn',
    usernameHint: 'Kun bogstaver, tal, bindestreger og underscores (2-24 tegn)',
  },
  el: {
    chooseUsername: 'Επιλέξτε όνομα χρήστη',
    usernamePlaceholder: 'ονομα-χρηστη',
    usernameHint: 'Μόνο γράμματα, αριθμοί, παύλες και κάτω παύλες (2-24 χαρακτήρες)',
  },
  et: {
    chooseUsername: 'Valige kasutajanimi',
    usernamePlaceholder: 'teie-kasutajanimi',
    usernameHint: 'Ainult tähed, numbrid, sidekriipsud ja alakriipsud (2-24 tähemärki)',
  },
  fa: {
    chooseUsername: 'یک نام کاربری انتخاب کنید',
    usernamePlaceholder: 'نام-کاربری-شما',
    usernameHint: 'فقط حروف، اعداد، خط تیره و زیرخط (2-24 کاراکتر)',
  },
  fi: {
    chooseUsername: 'Valitse käyttäjänimi',
    usernamePlaceholder: 'kayttajanimi',
    usernameHint: 'Vain kirjaimia, numeroita, viivoja ja alaviivoja (2-24 merkkiä)',
  },
  fr: {
    chooseUsername: "Choisissez un nom d'utilisateur",
    usernamePlaceholder: 'votre-nom',
    usernameHint: 'Lettres, chiffres, tirets et underscores uniquement (2-24 caractères)',
  },
  he: {
    chooseUsername: 'בחר שם משתמש',
    usernamePlaceholder: 'שם-משתמש',
    usernameHint: 'אותיות, מספרים, מקפים וקו תחתון בלבד (2-24 תווים)',
  },
  ko: {
    chooseUsername: '사용자 이름 선택',
    usernamePlaceholder: '사용자-이름',
    usernameHint: '문자, 숫자, 하이픈, 밑줄만 사용 가능 (2-24자)',
  },
  lt: {
    chooseUsername: 'Pasirinkite vartotojo vardą',
    usernamePlaceholder: 'jusu-vardas',
    usernameHint: 'Tik raidės, skaičiai, brūkšneliai ir pabraukimai (2-24 simboliai)',
  },
  lv: {
    chooseUsername: 'Izvēlieties lietotājvārdu',
    usernamePlaceholder: 'jusu-vards',
    usernameHint: 'Tikai burti, cipari, defises un pasvītrojumi (2-24 rakstzīmes)',
  },
  my: {
    chooseUsername: 'အသုံးပြုသူအမည် ရွေးချယ်ပါ',
    usernamePlaceholder: 'သင့်-အမည်',
    usernameHint: 'စာလုံး၊ ဂဏန်း၊ ခေါင်းစဉ်၊ အောက်မျဉ်းသာ (2-24 စာလုံး)',
  },
  nl: {
    chooseUsername: 'Kies een gebruikersnaam',
    usernamePlaceholder: 'jouw-naam',
    usernameHint: 'Alleen letters, cijfers, koppeltekens en underscores (2-24 tekens)',
  },
  pl: {
    chooseUsername: 'Wybierz nazwę użytkownika',
    usernamePlaceholder: 'twoja-nazwa',
    usernameHint: 'Tylko litery, cyfry, myślniki i podkreślenia (2-24 znaków)',
  },
  ru: {
    chooseUsername: 'Выберите имя пользователя',
    usernamePlaceholder: 'ваше-имя',
    usernameHint: 'Только буквы, цифры, дефисы и подчеркивания (2-24 символа)',
  },
  sk: {
    chooseUsername: 'Zvoľte používateľské meno',
    usernamePlaceholder: 'vase-meno',
    usernameHint: 'Iba písmená, čísla, pomlčky a podčiarkovníky (2-24 znakov)',
  },
  th: {
    chooseUsername: 'เลือกชื่อผู้ใช้',
    usernamePlaceholder: 'ชื่อผู้ใช้ของคุณ',
    usernameHint: 'ตัวอักษร ตัวเลข ขีดกลาง และขีดล่างเท่านั้น (2-24 ตัวอักษร)',
  },
  tr: {
    chooseUsername: 'Bir kullanıcı adı seçin',
    usernamePlaceholder: 'kullanici-adiniz',
    usernameHint: 'Sadece harfler, sayılar, tire ve alt çizgi (2-24 karakter)',
  },
  uk: {
    chooseUsername: "Виберіть ім'я користувача",
    usernamePlaceholder: 'ваше-імя',
    usernameHint: 'Тільки літери, цифри, дефіси та підкреслення (2-24 символи)',
  },
  zh: {
    chooseUsername: '选择用户名',
    usernamePlaceholder: '您的用户名',
    usernameHint: '只能使用字母、数字、连字符和下划线（2-24 个字符）',
  },
};

// Keyboard navigation translations
const keyboardNavFields = {
  ar: {
    keyboardNavigation: 'التنقل بلوحة المفاتيح',
    enableKeyboardShortcuts: 'تمكين اختصارات لوحة المفاتيح',
    key: 'المفتاح',
    action: 'الإجراء',
    nextComment: 'التعليق التالي',
    previousComment: 'التعليق السابق',
    focusCommentInput: 'تركيز الإدخال',
    editFocusedComment: 'تحرير التعليق',
    replyToFocusedComment: 'رد',
    deleteFocusedComment: 'حذف التعليق',
    collapseFocusedComment: 'طي',
    expandFocusedComment: 'توسيع',
    upvoteFocusedComment: 'تصويت إيجابي',
    downvoteFocusedComment: 'تصويت سلبي',
    confirmYesNo: 'تأكيد نعم/لا',
    cancelClose: 'إلغاء/إغلاق',
  },
  bg: {
    keyboardNavigation: 'Навигация с клавиатура',
    enableKeyboardShortcuts: 'Активиране на клавишни комбинации',
    key: 'Клавиш',
    action: 'Действие',
    nextComment: 'Следващ коментар',
    previousComment: 'Предишен коментар',
    focusCommentInput: 'Фокус на въвеждане',
    editFocusedComment: 'Редактиране на коментар',
    replyToFocusedComment: 'Отговор',
    deleteFocusedComment: 'Изтриване на коментар',
    collapseFocusedComment: 'Свиване',
    expandFocusedComment: 'Разгъване',
    upvoteFocusedComment: 'Гласуване нагоре',
    downvoteFocusedComment: 'Гласуване надолу',
    confirmYesNo: 'Потвърждение да/не',
    cancelClose: 'Отказ/затваряне',
  },
  ca: {
    keyboardNavigation: 'Navegació per teclat',
    enableKeyboardShortcuts: 'Activar dreceres de teclat',
    key: 'Tecla',
    action: 'Acció',
    nextComment: 'Comentari següent',
    previousComment: 'Comentari anterior',
    focusCommentInput: "Enfocar l'entrada",
    editFocusedComment: 'Editar comentari',
    replyToFocusedComment: 'Respondre',
    deleteFocusedComment: 'Eliminar comentari',
    collapseFocusedComment: 'Contraure',
    expandFocusedComment: 'Expandir',
    upvoteFocusedComment: 'Votar a favor',
    downvoteFocusedComment: 'Votar en contra',
    confirmYesNo: 'Confirmar sí/no',
    cancelClose: 'Cancel·lar/tancar',
  },
  cs: {
    keyboardNavigation: 'Navigace klávesnicí',
    enableKeyboardShortcuts: 'Povolit klávesové zkratky',
    key: 'Klávesa',
    action: 'Akce',
    nextComment: 'Další komentář',
    previousComment: 'Předchozí komentář',
    focusCommentInput: 'Zaměřit vstup',
    editFocusedComment: 'Upravit komentář',
    replyToFocusedComment: 'Odpovědět',
    deleteFocusedComment: 'Smazat komentář',
    collapseFocusedComment: 'Sbalit',
    expandFocusedComment: 'Rozbalit',
    upvoteFocusedComment: 'Hlasovat pro',
    downvoteFocusedComment: 'Hlasovat proti',
    confirmYesNo: 'Potvrdit ano/ne',
    cancelClose: 'Zrušit/zavřít',
  },
  da: {
    keyboardNavigation: 'Tastaturnavigation',
    enableKeyboardShortcuts: 'Aktiver tastaturgenveje',
    key: 'Tast',
    action: 'Handling',
    nextComment: 'Næste kommentar',
    previousComment: 'Forrige kommentar',
    focusCommentInput: 'Fokuser input',
    editFocusedComment: 'Rediger kommentar',
    replyToFocusedComment: 'Svar',
    deleteFocusedComment: 'Slet kommentar',
    collapseFocusedComment: 'Fold sammen',
    expandFocusedComment: 'Udvid',
    upvoteFocusedComment: 'Stem op',
    downvoteFocusedComment: 'Stem ned',
    confirmYesNo: 'Bekræft ja/nej',
    cancelClose: 'Annuller/luk',
  },
  de: {
    keyboardNavigation: 'Tastaturnavigation',
    enableKeyboardShortcuts: 'Tastaturkürzel aktivieren',
    key: 'Taste',
    action: 'Aktion',
    nextComment: 'Nächster Kommentar',
    previousComment: 'Vorheriger Kommentar',
    focusCommentInput: 'Eingabe fokussieren',
    editFocusedComment: 'Kommentar bearbeiten',
    replyToFocusedComment: 'Antworten',
    deleteFocusedComment: 'Kommentar löschen',
    collapseFocusedComment: 'Einklappen',
    expandFocusedComment: 'Ausklappen',
    upvoteFocusedComment: 'Upvote',
    downvoteFocusedComment: 'Downvote',
    confirmYesNo: 'Bestätigen ja/nein',
    cancelClose: 'Abbrechen/schließen',
  },
  el: {
    keyboardNavigation: 'Πλοήγηση πληκτρολογίου',
    enableKeyboardShortcuts: 'Ενεργοποίηση συντομεύσεων πληκτρολογίου',
    key: 'Πλήκτρο',
    action: 'Ενέργεια',
    nextComment: 'Επόμενο σχόλιο',
    previousComment: 'Προηγούμενο σχόλιο',
    focusCommentInput: 'Εστίαση εισόδου',
    editFocusedComment: 'Επεξεργασία σχολίου',
    replyToFocusedComment: 'Απάντηση',
    deleteFocusedComment: 'Διαγραφή σχολίου',
    collapseFocusedComment: 'Σύμπτυξη',
    expandFocusedComment: 'Ανάπτυξη',
    upvoteFocusedComment: 'Θετική ψήφος',
    downvoteFocusedComment: 'Αρνητική ψήφος',
    confirmYesNo: 'Επιβεβαίωση ναι/όχι',
    cancelClose: 'Ακύρωση/κλείσιμο',
  },
  es: {
    keyboardNavigation: 'Navegación por teclado',
    enableKeyboardShortcuts: 'Habilitar atajos de teclado',
    key: 'Tecla',
    action: 'Acción',
    nextComment: 'Siguiente comentario',
    previousComment: 'Comentario anterior',
    focusCommentInput: 'Enfocar entrada',
    editFocusedComment: 'Editar comentario',
    replyToFocusedComment: 'Responder',
    deleteFocusedComment: 'Eliminar comentario',
    collapseFocusedComment: 'Contraer',
    expandFocusedComment: 'Expandir',
    upvoteFocusedComment: 'Votar a favor',
    downvoteFocusedComment: 'Votar en contra',
    confirmYesNo: 'Confirmar sí/no',
    cancelClose: 'Cancelar/cerrar',
  },
  et: {
    keyboardNavigation: 'Klaviatuuri navigeerimine',
    enableKeyboardShortcuts: 'Luba klaviatuuri otseteed',
    key: 'Klahv',
    action: 'Tegevus',
    nextComment: 'Järgmine kommentaar',
    previousComment: 'Eelmine kommentaar',
    focusCommentInput: 'Fokuseeri sisend',
    editFocusedComment: 'Muuda kommentaari',
    replyToFocusedComment: 'Vasta',
    deleteFocusedComment: 'Kustuta kommentaar',
    collapseFocusedComment: 'Ahenda',
    expandFocusedComment: 'Laienda',
    upvoteFocusedComment: 'Hääleta üles',
    downvoteFocusedComment: 'Hääleta alla',
    confirmYesNo: 'Kinnita jah/ei',
    cancelClose: 'Tühista/sulge',
  },
  fa: {
    keyboardNavigation: 'ناوبری صفحه‌کلید',
    enableKeyboardShortcuts: 'فعال‌سازی میانبرهای صفحه‌کلید',
    key: 'کلید',
    action: 'عمل',
    nextComment: 'نظر بعدی',
    previousComment: 'نظر قبلی',
    focusCommentInput: 'تمرکز ورودی',
    editFocusedComment: 'ویرایش نظر',
    replyToFocusedComment: 'پاسخ',
    deleteFocusedComment: 'حذف نظر',
    collapseFocusedComment: 'جمع کردن',
    expandFocusedComment: 'باز کردن',
    upvoteFocusedComment: 'رأی مثبت',
    downvoteFocusedComment: 'رأی منفی',
    confirmYesNo: 'تأیید بله/خیر',
    cancelClose: 'لغو/بستن',
  },
  fi: {
    keyboardNavigation: 'Näppäimistönavigointi',
    enableKeyboardShortcuts: 'Ota näppäinoikotiet käyttöön',
    key: 'Näppäin',
    action: 'Toiminto',
    nextComment: 'Seuraava kommentti',
    previousComment: 'Edellinen kommentti',
    focusCommentInput: 'Kohdista syöte',
    editFocusedComment: 'Muokkaa kommenttia',
    replyToFocusedComment: 'Vastaa',
    deleteFocusedComment: 'Poista kommentti',
    collapseFocusedComment: 'Tiivistä',
    expandFocusedComment: 'Laajenna',
    upvoteFocusedComment: 'Äänes tä ylös',
    downvoteFocusedComment: 'Äänestä alas',
    confirmYesNo: 'Vahvista kyllä/ei',
    cancelClose: 'Peruuta/sulje',
  },
  fr: {
    keyboardNavigation: 'Navigation au clavier',
    enableKeyboardShortcuts: 'Activer les raccourcis clavier',
    key: 'Touche',
    action: 'Action',
    nextComment: 'Commentaire suivant',
    previousComment: 'Commentaire précédent',
    focusCommentInput: "Concentrer l'entrée",
    editFocusedComment: 'Modifier le commentaire',
    replyToFocusedComment: 'Répondre',
    deleteFocusedComment: 'Supprimer le commentaire',
    collapseFocusedComment: 'Réduire',
    expandFocusedComment: 'Développer',
    upvoteFocusedComment: 'Voter pour',
    downvoteFocusedComment: 'Voter contre',
    confirmYesNo: 'Confirmer oui/non',
    cancelClose: 'Annuler/fermer',
  },
  he: {
    keyboardNavigation: 'ניווט מקלדת',
    enableKeyboardShortcuts: 'הפעל קיצורי מקלדת',
    key: 'מקש',
    action: 'פעולה',
    nextComment: 'תגובה הבאה',
    previousComment: 'תגובה קודמת',
    focusCommentInput: 'מיקוד קלט',
    editFocusedComment: 'ערוך תגובה',
    replyToFocusedComment: 'השב',
    deleteFocusedComment: 'מחק תגובה',
    collapseFocusedComment: 'כווץ',
    expandFocusedComment: 'הרחב',
    upvoteFocusedComment: 'הצבע בעד',
    downvoteFocusedComment: 'הצבע נגד',
    confirmYesNo: 'אשר כן/לא',
    cancelClose: 'ביטול/סגירה',
  },
  hr: {
    keyboardNavigation: 'Navigacija tipkovnicom',
    enableKeyboardShortcuts: 'Omogući prečace tipkovnice',
    key: 'Tipka',
    action: 'Radnja',
    nextComment: 'Sljedeći komentar',
    previousComment: 'Prethodni komentar',
    focusCommentInput: 'Fokusiraj unos',
    editFocusedComment: 'Uredi komentar',
    replyToFocusedComment: 'Odgovori',
    deleteFocusedComment: 'Izbriši komentar',
    collapseFocusedComment: 'Skupi',
    expandFocusedComment: 'Proširi',
    upvoteFocusedComment: 'Glasaj za',
    downvoteFocusedComment: 'Glasaj protiv',
    confirmYesNo: 'Potvrdi da/ne',
    cancelClose: 'Otkaži/zatvori',
  },
  hu: {
    keyboardNavigation: 'Billentyűzetes navigáció',
    enableKeyboardShortcuts: 'Billentyűparancsok engedélyezése',
    key: 'Billentyű',
    action: 'Művelet',
    nextComment: 'Következő hozzászólás',
    previousComment: 'Előző hozzászólás',
    focusCommentInput: 'Beviteli mező fókuszálása',
    editFocusedComment: 'Hozzászólás szerkesztése',
    replyToFocusedComment: 'Válasz',
    deleteFocusedComment: 'Hozzászólás törlése',
    collapseFocusedComment: 'Összecsukás',
    expandFocusedComment: 'Kibontás',
    upvoteFocusedComment: 'Felszavazás',
    downvoteFocusedComment: 'Leszavazás',
    confirmYesNo: 'Megerősítés igen/nem',
    cancelClose: 'Mégse/bezárás',
  },
  id: {
    keyboardNavigation: 'Navigasi Keyboard',
    enableKeyboardShortcuts: 'Aktifkan pintasan keyboard',
    key: 'Tombol',
    action: 'Aksi',
    nextComment: 'Komentar berikutnya',
    previousComment: 'Komentar sebelumnya',
    focusCommentInput: 'Fokus input',
    editFocusedComment: 'Edit komentar',
    replyToFocusedComment: 'Balas',
    deleteFocusedComment: 'Hapus komentar',
    collapseFocusedComment: 'Ciutkan',
    expandFocusedComment: 'Perluas',
    upvoteFocusedComment: 'Suara positif',
    downvoteFocusedComment: 'Suara negatif',
    confirmYesNo: 'Konfirmasi ya/tidak',
    cancelClose: 'Batal/tutup',
  },
  it: {
    keyboardNavigation: 'Navigazione da tastiera',
    enableKeyboardShortcuts: 'Abilita scorciatoie da tastiera',
    key: 'Tasto',
    action: 'Azione',
    nextComment: 'Commento successivo',
    previousComment: 'Commento precedente',
    focusCommentInput: 'Metti a fuoco input',
    editFocusedComment: 'Modifica commento',
    replyToFocusedComment: 'Rispondi',
    deleteFocusedComment: 'Elimina commento',
    collapseFocusedComment: 'Comprimi',
    expandFocusedComment: 'Espandi',
    upvoteFocusedComment: 'Vota positivo',
    downvoteFocusedComment: 'Vota negativo',
    confirmYesNo: 'Conferma sì/no',
    cancelClose: 'Annulla/chiudi',
  },
  ja: {
    keyboardNavigation: 'キーボードナビゲーション',
    enableKeyboardShortcuts: 'キーボードショートカットを有効にする',
    key: 'キー',
    action: 'アクション',
    nextComment: '次のコメント',
    previousComment: '前のコメント',
    focusCommentInput: '入力欄にフォーカス',
    editFocusedComment: 'コメントを編集',
    replyToFocusedComment: '返信',
    deleteFocusedComment: 'コメントを削除',
    collapseFocusedComment: '折りたたむ',
    expandFocusedComment: '展開',
    upvoteFocusedComment: '賛成票',
    downvoteFocusedComment: '反対票',
    confirmYesNo: 'はい/いいえを確認',
    cancelClose: 'キャンセル/閉じる',
  },
  ko: {
    keyboardNavigation: '키보드 탐색',
    enableKeyboardShortcuts: '키보드 단축키 활성화',
    key: '키',
    action: '동작',
    nextComment: '다음 댓글',
    previousComment: '이전 댓글',
    focusCommentInput: '입력 포커스',
    editFocusedComment: '댓글 편집',
    replyToFocusedComment: '답글',
    deleteFocusedComment: '댓글 삭제',
    collapseFocusedComment: '접기',
    expandFocusedComment: '펼치기',
    upvoteFocusedComment: '추천',
    downvoteFocusedComment: '비추천',
    confirmYesNo: '예/아니오 확인',
    cancelClose: '취소/닫기',
  },
  lt: {
    keyboardNavigation: 'Klaviatūros navigacija',
    enableKeyboardShortcuts: 'Įjungti klaviatūros sparčiuosius klavišus',
    key: 'Klavišas',
    action: 'Veiksmas',
    nextComment: 'Kitas komentaras',
    previousComment: 'Ankstesnis komentaras',
    focusCommentInput: 'Fokusuoti įvestį',
    editFocusedComment: 'Redaguoti komentarą',
    replyToFocusedComment: 'Atsakyti',
    deleteFocusedComment: 'Ištrinti komentarą',
    collapseFocusedComment: 'Suskleisti',
    expandFocusedComment: 'Išskleisti',
    upvoteFocusedComment: 'Balsuoti už',
    downvoteFocusedComment: 'Balsuoti prieš',
    confirmYesNo: 'Patvirtinti taip/ne',
    cancelClose: 'Atšaukti/uždaryti',
  },
  lv: {
    keyboardNavigation: 'Tastatūras navigācija',
    enableKeyboardShortcuts: 'Iespējot tastatūras īsinājumtaustiņus',
    key: 'Taustiņš',
    action: 'Darbība',
    nextComment: 'Nākamais komentārs',
    previousComment: 'Iepriekšējais komentārs',
    focusCommentInput: 'Fokusēt ievadi',
    editFocusedComment: 'Rediģēt komentāru',
    replyToFocusedComment: 'Atbildēt',
    deleteFocusedComment: 'Dzēst komentāru',
    collapseFocusedComment: 'Sakļaut',
    expandFocusedComment: 'Izvērst',
    upvoteFocusedComment: 'Balsot par',
    downvoteFocusedComment: 'Balsot pret',
    confirmYesNo: 'Apstiprināt jā/nē',
    cancelClose: 'Atcelt/aizvērt',
  },
  my: {
    keyboardNavigation: 'ကီးဘုတ်လမ်းညွှန်',
    enableKeyboardShortcuts: 'ကီးဘုတ်အတိုကောက်များ ဖွင့်ပါ',
    key: 'ခလုတ်',
    action: 'လုပ်ဆောင်ချက်',
    nextComment: 'နောက်မှတ်ချက်',
    previousComment: 'ယခင်မှတ်ချက်',
    focusCommentInput: 'အာရုံစိုက်ထည့်သွင်းမှု',
    editFocusedComment: 'မှတ်ချက်တည်းဖြတ်',
    replyToFocusedComment: 'ပြန်ကြား',
    deleteFocusedComment: 'မှတ်ချက်ဖျက်',
    collapseFocusedComment: 'ခေါက်သိမ်း',
    expandFocusedComment: 'ချဲ့ထွင်',
    upvoteFocusedComment: 'သဘောတူမဲ',
    downvoteFocusedComment: 'သဘောမတူမဲ',
    confirmYesNo: 'အတည်ပြု ဟုတ်/မဟုတ်',
    cancelClose: 'ပယ်ဖျက်/ပိတ်',
  },
  nl: {
    keyboardNavigation: 'Toetsenbordnavigatie',
    enableKeyboardShortcuts: 'Sneltoetsen inschakelen',
    key: 'Toets',
    action: 'Actie',
    nextComment: 'Volgende opmerking',
    previousComment: 'Vorige opmerking',
    focusCommentInput: 'Focus invoer',
    editFocusedComment: 'Opmerking bewerken',
    replyToFocusedComment: 'Antwoorden',
    deleteFocusedComment: 'Opmerking verwijderen',
    collapseFocusedComment: 'Inklappen',
    expandFocusedComment: 'Uitklappen',
    upvoteFocusedComment: 'Omhoog stemmen',
    downvoteFocusedComment: 'Omlaag stemmen',
    confirmYesNo: 'Bevestig ja/nee',
    cancelClose: 'Annuleren/sluiten',
  },
  no: {
    keyboardNavigation: 'Tastaturnavigering',
    enableKeyboardShortcuts: 'Aktiver tastatursnarveier',
    key: 'Tast',
    action: 'Handling',
    nextComment: 'Neste kommentar',
    previousComment: 'Forrige kommentar',
    focusCommentInput: 'Fokuser inndata',
    editFocusedComment: 'Rediger kommentar',
    replyToFocusedComment: 'Svar',
    deleteFocusedComment: 'Slett kommentar',
    collapseFocusedComment: 'Skjul',
    expandFocusedComment: 'Utvid',
    upvoteFocusedComment: 'Stem opp',
    downvoteFocusedComment: 'Stem ned',
    confirmYesNo: 'Bekreft ja/nei',
    cancelClose: 'Avbryt/lukk',
  },
  pl: {
    keyboardNavigation: 'Nawigacja klawiaturą',
    enableKeyboardShortcuts: 'Włącz skróty klawiszowe',
    key: 'Klawisz',
    action: 'Akcja',
    nextComment: 'Następny komentarz',
    previousComment: 'Poprzedni komentarz',
    focusCommentInput: 'Skup się na wprowadzaniu',
    editFocusedComment: 'Edytuj komentarz',
    replyToFocusedComment: 'Odpowiedz',
    deleteFocusedComment: 'Usuń komentarz',
    collapseFocusedComment: 'Zwiń',
    expandFocusedComment: 'Rozwiń',
    upvoteFocusedComment: 'Głosuj za',
    downvoteFocusedComment: 'Głosuj przeciw',
    confirmYesNo: 'Potwierdź tak/nie',
    cancelClose: 'Anuluj/zamknij',
  },
  pt: {
    keyboardNavigation: 'Navegação por teclado',
    enableKeyboardShortcuts: 'Ativar atalhos de teclado',
    key: 'Tecla',
    action: 'Ação',
    nextComment: 'Próximo comentário',
    previousComment: 'Comentário anterior',
    focusCommentInput: 'Focar entrada',
    editFocusedComment: 'Editar comentário',
    replyToFocusedComment: 'Responder',
    deleteFocusedComment: 'Excluir comentário',
    collapseFocusedComment: 'Recolher',
    expandFocusedComment: 'Expandir',
    upvoteFocusedComment: 'Votar a favor',
    downvoteFocusedComment: 'Votar contra',
    confirmYesNo: 'Confirmar sim/não',
    cancelClose: 'Cancelar/fechar',
  },
  ro: {
    keyboardNavigation: 'Navigare cu tastatura',
    enableKeyboardShortcuts: 'Activează scurtături de tastatură',
    key: 'Tastă',
    action: 'Acțiune',
    nextComment: 'Comentariul următor',
    previousComment: 'Comentariul anterior',
    focusCommentInput: 'Focalizează intrarea',
    editFocusedComment: 'Editează comentariul',
    replyToFocusedComment: 'Răspunde',
    deleteFocusedComment: 'Șterge comentariul',
    collapseFocusedComment: 'Restrânge',
    expandFocusedComment: 'Extinde',
    upvoteFocusedComment: 'Votează pozitiv',
    downvoteFocusedComment: 'Votează negativ',
    confirmYesNo: 'Confirmă da/nu',
    cancelClose: 'Anulează/închide',
  },
  ru: {
    keyboardNavigation: 'Навигация с клавиатуры',
    enableKeyboardShortcuts: 'Включить горячие клавиши',
    key: 'Клавиша',
    action: 'Действие',
    nextComment: 'Следующий комментарий',
    previousComment: 'Предыдущий комментарий',
    focusCommentInput: 'Фокус на вводе',
    editFocusedComment: 'Редактировать комментарий',
    replyToFocusedComment: 'Ответить',
    deleteFocusedComment: 'Удалить комментарий',
    collapseFocusedComment: 'Свернуть',
    expandFocusedComment: 'Развернуть',
    upvoteFocusedComment: 'Голосовать за',
    downvoteFocusedComment: 'Голосовать против',
    confirmYesNo: 'Подтвердить да/нет',
    cancelClose: 'Отменить/закрыть',
  },
  sk: {
    keyboardNavigation: 'Navigácia klávesnicou',
    enableKeyboardShortcuts: 'Povoliť klávesové skratky',
    key: 'Klávesa',
    action: 'Akcia',
    nextComment: 'Ďalší komentár',
    previousComment: 'Predchádzajúci komentár',
    focusCommentInput: 'Zamerať vstup',
    editFocusedComment: 'Upraviť komentár',
    replyToFocusedComment: 'Odpovedať',
    deleteFocusedComment: 'Vymazať komentár',
    collapseFocusedComment: 'Zbaliť',
    expandFocusedComment: 'Rozbaliť',
    upvoteFocusedComment: 'Hlasovať za',
    downvoteFocusedComment: 'Hlasovať proti',
    confirmYesNo: 'Potvrdiť áno/nie',
    cancelClose: 'Zrušiť/zavrieť',
  },
  sl: {
    keyboardNavigation: 'Navigacija s tipkovnico',
    enableKeyboardShortcuts: 'Omogoči bližnjice na tipkovnici',
    key: 'Tipka',
    action: 'Dejanje',
    nextComment: 'Naslednji komentar',
    previousComment: 'Prejšnji komentar',
    focusCommentInput: 'Fokusiraj vnos',
    editFocusedComment: 'Uredi komentar',
    replyToFocusedComment: 'Odgovori',
    deleteFocusedComment: 'Izbriši komentar',
    collapseFocusedComment: 'Strni',
    expandFocusedComment: 'Razširi',
    upvoteFocusedComment: 'Glasuj za',
    downvoteFocusedComment: 'Glasuj proti',
    confirmYesNo: 'Potrdi da/ne',
    cancelClose: 'Prekliči/zapri',
  },
  sr: {
    keyboardNavigation: 'Навигација тастатуром',
    enableKeyboardShortcuts: 'Омогући пречице тастатуре',
    key: 'Тастер',
    action: 'Радња',
    nextComment: 'Следећи коментар',
    previousComment: 'Претходни коментар',
    focusCommentInput: 'Фокусирај унос',
    editFocusedComment: 'Измени коментар',
    replyToFocusedComment: 'Одговори',
    deleteFocusedComment: 'Обриши коментар',
    collapseFocusedComment: 'Скупи',
    expandFocusedComment: 'Прошири',
    upvoteFocusedComment: 'Гласај за',
    downvoteFocusedComment: 'Гласај против',
    confirmYesNo: 'Потврди да/не',
    cancelClose: 'Откажи/затвори',
  },
  sv: {
    keyboardNavigation: 'Tangentbordsnavigering',
    enableKeyboardShortcuts: 'Aktivera kortkommandon',
    key: 'Tangent',
    action: 'Åtgärd',
    nextComment: 'Nästa kommentar',
    previousComment: 'Föregående kommentar',
    focusCommentInput: 'Fokusera inmatning',
    editFocusedComment: 'Redigera kommentar',
    replyToFocusedComment: 'Svara',
    deleteFocusedComment: 'Ta bort kommentar',
    collapseFocusedComment: 'Komprimera',
    expandFocusedComment: 'Expandera',
    upvoteFocusedComment: 'Rösta upp',
    downvoteFocusedComment: 'Rösta ner',
    confirmYesNo: 'Bekräfta ja/nej',
    cancelClose: 'Avbryt/stäng',
  },
  th: {
    keyboardNavigation: 'การนำทางด้วยแป้นพิมพ์',
    enableKeyboardShortcuts: 'เปิดใช้งานแป้นลัด',
    key: 'ปุ่ม',
    action: 'การกระทำ',
    nextComment: 'ความคิดเห็นถัดไป',
    previousComment: 'ความคิดเห็นก่อนหน้า',
    focusCommentInput: 'โฟกัสที่ช่องป้อน',
    editFocusedComment: 'แก้ไขความคิดเห็น',
    replyToFocusedComment: 'ตอบกลับ',
    deleteFocusedComment: 'ลบความคิดเห็น',
    collapseFocusedComment: 'ยุบ',
    expandFocusedComment: 'ขยาย',
    upvoteFocusedComment: 'โหวตขึ้น',
    downvoteFocusedComment: 'โหวตลง',
    confirmYesNo: 'ยืนยัน ใช่/ไม่ใช่',
    cancelClose: 'ยกเลิก/ปิด',
  },
  tr: {
    keyboardNavigation: 'Klavye Navigasyonu',
    enableKeyboardShortcuts: 'Klavye kısayollarını etkinleştir',
    key: 'Tuş',
    action: 'Eylem',
    nextComment: 'Sonraki yorum',
    previousComment: 'Önceki yorum',
    focusCommentInput: 'Girişe odaklan',
    editFocusedComment: 'Yorumu düzenle',
    replyToFocusedComment: 'Yanıtla',
    deleteFocusedComment: 'Yorumu sil',
    collapseFocusedComment: 'Daralt',
    expandFocusedComment: 'Genişlet',
    upvoteFocusedComment: 'Yukarı oy ver',
    downvoteFocusedComment: 'Aşağı oy ver',
    confirmYesNo: 'Evet/hayır onayla',
    cancelClose: 'İptal/kapat',
  },
  uk: {
    keyboardNavigation: 'Навігація з клавіатури',
    enableKeyboardShortcuts: 'Увімкнути гарячі клавіші',
    key: 'Клавіша',
    action: 'Дія',
    nextComment: 'Наступний коментар',
    previousComment: 'Попередній коментар',
    focusCommentInput: 'Фокус на введенні',
    editFocusedComment: 'Редагувати коментар',
    replyToFocusedComment: 'Відповісти',
    deleteFocusedComment: 'Видалити коментар',
    collapseFocusedComment: 'Згорнути',
    expandFocusedComment: 'Розгорнути',
    upvoteFocusedComment: 'Голосувати за',
    downvoteFocusedComment: 'Голосувати проти',
    confirmYesNo: 'Підтвердити так/ні',
    cancelClose: 'Скасувати/закрити',
  },
  vi: {
    keyboardNavigation: 'Điều hướng bàn phím',
    enableKeyboardShortcuts: 'Bật phím tắt',
    key: 'Phím',
    action: 'Hành động',
    nextComment: 'Bình luận tiếp theo',
    previousComment: 'Bình luận trước',
    focusCommentInput: 'Tập trung đầu vào',
    editFocusedComment: 'Chỉnh sửa bình luận',
    replyToFocusedComment: 'Trả lời',
    deleteFocusedComment: 'Xóa bình luận',
    collapseFocusedComment: 'Thu gọn',
    expandFocusedComment: 'Mở rộng',
    upvoteFocusedComment: 'Bình chọn lên',
    downvoteFocusedComment: 'Bình chọn xuống',
    confirmYesNo: 'Xác nhận có/không',
    cancelClose: 'Hủy/đóng',
  },
  zh: {
    keyboardNavigation: '键盘导航',
    enableKeyboardShortcuts: '启用键盘快捷键',
    key: '按键',
    action: '操作',
    nextComment: '下一条评论',
    previousComment: '上一条评论',
    focusCommentInput: '聚焦输入框',
    editFocusedComment: '编辑评论',
    replyToFocusedComment: '回复',
    deleteFocusedComment: '删除评论',
    collapseFocusedComment: '折叠',
    expandFocusedComment: '展开',
    upvoteFocusedComment: '点赞',
    downvoteFocusedComment: '点踩',
    confirmYesNo: '确认是/否',
    cancelClose: '取消/关闭',
  },
};

const localesDir = join(process.cwd(), 'src', 'locales');
const localeFiles = readdirSync(localesDir).filter(f => f.endsWith('.ts'));

for (const filename of localeFiles) {
  const localeCode = filename.replace('.ts', '');

  if (localeCode === 'en') {
    console.log(`✓ Skipping ${filename} (reference locale)`);
    continue;
  }

  console.log(`Processing ${filename}...`);
  const filePath = join(localesDir, filename);
  let content = readFileSync(filePath, 'utf8');
  let modified = false;

  // Check for username fields
  const needsUsernameFields = usernameFields[localeCode];
  if (needsUsernameFields && !content.includes('chooseUsername:')) {
    console.log(`  Adding username fields...`);
    content = content.replace(
      /(usernameTaken:[\s\S]*?checking: '[^']*',)\n(  \/\/ Auth - general)/,
      `$1\n  chooseUsername: '${needsUsernameFields.chooseUsername}',\n  usernamePlaceholder: '${needsUsernameFields.usernamePlaceholder}',\n  usernameHint: '${needsUsernameFields.usernameHint}',\n\n$2`
    );
    modified = true;
  }

  // Check for keyboard navigation fields
  const needsKeyboardNavFields = keyboardNavFields[localeCode];
  if (needsKeyboardNavFields && !content.includes('keyboardNavigation:')) {
    console.log(`  Adding keyboard navigation fields...`);
    // Helper function to escape single quotes in strings
    const esc = (str) => str.replace(/'/g, "\\'");
    const keyboardFields = `  keyboardNavigation: '${esc(needsKeyboardNavFields.keyboardNavigation)}',
  enableKeyboardShortcuts: '${esc(needsKeyboardNavFields.enableKeyboardShortcuts)}',
  key: '${esc(needsKeyboardNavFields.key)}',
  action: '${esc(needsKeyboardNavFields.action)}',
  nextComment: '${esc(needsKeyboardNavFields.nextComment)}',
  previousComment: '${esc(needsKeyboardNavFields.previousComment)}',
  focusCommentInput: '${esc(needsKeyboardNavFields.focusCommentInput)}',
  editFocusedComment: '${esc(needsKeyboardNavFields.editFocusedComment)}',
  replyToFocusedComment: '${esc(needsKeyboardNavFields.replyToFocusedComment)}',
  deleteFocusedComment: '${esc(needsKeyboardNavFields.deleteFocusedComment)}',
  collapseFocusedComment: '${esc(needsKeyboardNavFields.collapseFocusedComment)}',
  expandFocusedComment: '${esc(needsKeyboardNavFields.expandFocusedComment)}',
  upvoteFocusedComment: '${esc(needsKeyboardNavFields.upvoteFocusedComment)}',
  downvoteFocusedComment: '${esc(needsKeyboardNavFields.downvoteFocusedComment)}',
  confirmYesNo: '${esc(needsKeyboardNavFields.confirmYesNo)}',
  cancelClose: '${esc(needsKeyboardNavFields.cancelClose)}',`;

    content = content.replace(
      /(holdForSeconds: '[^']*',)\s*\n+(\s*\/\/ Username)/,
      `$1\n\n  // Keyboard navigation\n${keyboardFields}\n\n$2`
    );
    modified = true;
  }

  // Check for vi anonymous fields (special case)
  if (localeCode === 'vi' && !content.includes('guestNamePlaceholder:')) {
    const viTranslations = missingTranslations.vi;
    console.log(`  Adding anonymous fields...`);
    content = content.replace(
      /(connectingTo: '[^']*',)\n\n(  \/\/ User profile)/,
      `$1\n\n  // Auth - Anonymous\n  guestNamePlaceholder: '${viTranslations.guestNamePlaceholder}',\n  continueAsGuest: '${viTranslations.continueAsGuest}',\n  guest: '${viTranslations.guest}',\n  anonymous: '${viTranslations.anonymous}',\n\n$2`
    );
    modified = true;
  }

  if (modified) {
    writeFileSync(filePath, content, 'utf8');
    console.log(`  ✓ Updated`);
  } else {
    console.log(`  ✓ Already complete`);
  }
}

console.log('\n✅ Done! All locale files are now complete.');
